<!doctype html>
<html lang="en">
    <head>
        <title>Enabling native spell checking with Django-CMS 3</title>

        <!-- meta -->
        <meta charset="utf-8" />
        <meta name="author" content="" />

        <!-- Feeds -->
        <link href="http://niceguydave.com/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="David Talbot Atom Feed" />

        <!-- Style -->
        <link href="https://fonts.googleapis.com/css?family=Linden+Hill:400,400italic" rel="stylesheet" type="text/css" />
        <link rel="stylesheet" href="http://niceguydave.com/theme/css/main.css" type="text/css" />
        <link rel="shortcut icon" href="http://niceguydave.com/theme/favicon.ico" />

        <!-- Google analytics -->

    </head>
    <body>
        <div id="wrapper">
          <div id="blogtitle">David Talbot</div>

          <!-- Blogroll -->
          <ul id="mainnav">
            <li><a href="/">Home</a></li>
            <li><a href="http://python.org/">Python.org</a></li>
          </ul>

          <div class="clearboth"></div>
          <div id="content">

<h1>Enabling native spell checking with Django-CMS 3</h1>
<div class=date>Mon 22 September 2014
 / <span class="tags">
  <a class="tag" href="http://niceguydave.com/tag/cms.html">cms</a>
  <a class="tag" href="http://niceguydave.com/tag/django.html">django</a>
  <a class="tag" href="http://niceguydave.com/tag/django-cms.html">django-cms</a>
</span>
</div>

<p>We use Django-CMS extensively at the company I work for,
<a href="http://www.pancentric.com/">Pancentric</a>. I was recently
given what, at first, seemed to be a fairly simple request: ensure that
any misspelled words are highlighted within the default text editor.</p>
<p>I'm fairly new to <a href="http://ckeditor.com/" title="CKEditor">CKEditor</a> and
although I'm liking using it so far, there are a certain number of
features which make things... awkward. Spell checking is one of them.</p>
<p>The toolbar has a number of sensible defaults which can be seen in the
image below.  Notice that, although the last three words are misspelled,
there is no visual indication of this.</p>
<p><img alt="Default CKEditor layout" src="images/django_cms_toolbar_pre_config.png" /></p>
<p>You'll notice that what I <em>don't</em> have here is either a spell-check
button or the ability to see any misspelled words highlighted within the
text editor itself.</p>
<p>After digging around for a while, it seemed that many of the
recommendations for including a spell checker directed me to using a
licensed plugin, something which I didn't want or need; I just wanted to
enable the context menu to highlight misspelled words. Moreover, the
context menu had been hijacked too, which stopped me from right-clicking
on a word to get a context-specific menu.</p>
<p>In the end, after a bit of searching and finding some useful posts about
the same issue (like <a href="http://murfitt.net/blog/getting-browser-spell-checker-work-ckeditor-drupal">this
one</a>
and <a href="http://stackoverflow.com/questions/2682042/ckeditor-using-firefox-built-in-spellchecker">this
one</a>)
I was able to hack together the following configuration. This sits
within my <code>settings.py</code> file and gives a minimal working solution which
allows misspelled words to be highlighted within the text editor and
which doesn't force me to install any additional spell checking plugins:</p>
<div class="highlight"><pre>CKEDITOR_SETTINGS = {  
    &#39;disableNativeSpellChecker&#39;: False,  
    &#39;removePlugins&#39;: &#39;contextmenu,liststyle,tabletools&#39;,  
    &#39;toolbar_CMS&#39;: [  
        [&#39;Undo&#39;, &#39;Redo&#39;],  
        [&#39;cmsplugins&#39;, &#39;-&#39;, &#39;PasteText&#39;,],  
        [&#39;Format&#39;, &#39;NumberedList&#39;,&#39;BulletedList&#39;,],  
        [&#39;Bold&#39;, &#39;Italic&#39;, &#39;Underline&#39;, &#39;-&#39;, &#39;RemoveFormat&#39;],  
        [&#39;Source&#39;, &#39;ShowBlocks&#39;,]  
    ],  
}  
</pre></div>


<p>Some notes on what I've done here:</p>
<ol>
<li>By default, <a href="http://docs.ckeditor.com/#!/guide/dev_spellcheck"><code>disableNativeSpellChecker</code> is set to
    <code>True</code></a>, so I
    needed to override this behaviour.</li>
<li>I only actually needed to remove <code>contextmenu</code> from the
    <code>removePlugins</code> attribute: <code>liststyle</code> and <code>tabletools</code> depend upon
    <code>contextmenu</code>, so they needed to come out, too.</li>
<li>The additional <code>'toolbar_CMS'</code> config is not part of the problem
    above but illustrates how I've reduced the number of tool bar items
    to a sensible minimum in the image below</li>
</ol>
<p>The final appearance of the editor after the changes have been made is
as below.  Notice the final three nonsense words highlighted as
misspelled (I'm using Chrome ):</p>
<p><img alt="CKEditor toolbar after configuring native browser spell checking" src="images/django_cms_toolbar_post_config.png" /></p>


          </div>
        </div>

        <!-- footer -->
        <div class=footer>
          <div class="textwidget">


            <a alt="twitter" href="https://twitter.com/niceguydave"><img src="http://niceguydave.com/theme/button/badge_twitter.png" alt="twitter button" /></a>









            <a alt="Google +" rel="author" href="https://plus.google.com/u/0/+DavidTalbot1974"><img src="http://niceguydave.com/theme/button/badge_google+.png" alt="google + button" /></a>





















          </div>

      </div>


     </body>
</html>